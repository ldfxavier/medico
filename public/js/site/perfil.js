$(function(){function e(){document.getElementById("logradouro").value="",document.getElementById("bairro").value="",document.getElementById("cidade").value="",document.getElementById("estado").value=""}document.getElementById("cep").addEventListener("blur",function(a){var o;""!=(o=a.target.value.replace(/\D/g,""))?/^[0-9]{8}$/.test(o)?($("#logradouro").val("..."),$("#bairro").val("..."),$("#cidade").val("..."),$("#estado").val("..."),$("#ibge").val("..."),$.getJSON("https://viacep.com.br/ws/"+o+"/json/?callback=?",function(a){"erro"in a?(e(),Alerta.mensagem("Erro","Formato de CEP inv치lido.")):($("#logradouro").val(a.logradouro),$("#bairro").val(a.bairro),$("#cidade").val(a.localidade),$("#estado").val(a.uf),$("#ibge").val(a.ibge))})):(e(),Alerta.mensagem("Erro","Formato de CEP inv치lido.")):e()},!0);var a=function(e,a){1==e.erro?(Loading.hide(),Alerta.mensagem(e.titulo,e.texto)):0==e.erro&&(Loading.hide(),$("#img").css({top:0,left:0}),$("#img").attr({src:e.link}),a.addClass("ativo"),$("input.input_imagem",a).val(e.arquivo)),$("input[type=file]",a).val("")};$("body").on("change","#upload",function(){let e=$(this).closest(".bloco_foto");var o=new FormData;o.append("logo",$(this).prop("files")[0]),Loading.show(),$.ajax({url:LINK+"/salvar-lofo-perfil",data:o,type:"post",dataType:"json",success:function(o){$("#img").css({top:0,left:0}),$("#img").draggable({containment:"parent",scroll:!1}),a(o,e)},error:function(o){a(o,e)},processData:!1,cache:!1,contentType:!1})}),$("#botao_enviar_cadastro").click(function(e){e.preventDefault();const a=$(this).closest("form");let o=$("input[name=cnpj]",a).val(),n=$("input[name=foto_upload]",a).val(),t=$("input[name=nome_fantasia]",a).val(),r=$("input[name=razao_social]",a).val(),l=$("input[name=cep]",a).val(),i=$("input[name=logradouro]",a).val(),p=$("input[name=numero]",a).val(),d=$("input[name=complemento]",a).val(),s=$("input[name=referencia]",a).val(),c=$("input[name=bairro]",a).val(),m=$("input[name=cidade]",a).val(),u=$("select[name=estado]",a).val(),v=$("input[name=nome_responsavel]",a).val(),g=$("input[name=email_responsavel]",a).val(),f=$("input[name=cpf_responsavel]",a).val();if(void 0===n)return Alerta.mensagem("Campo obrigat칩rio!","Envie uma logo para continuar."),!1;Loading.show();let b=new FormData;return b.append("cnpj",o),b.append("logo",n),b.append("nome_fantasia",t),b.append("razao_social",r),b.append("cep",l),b.append("logradouro",i),b.append("numero",p),b.append("complemento",d),b.append("referencia",s),b.append("bairro",c),b.append("cidade",m),b.append("estado",u),b.append("nome_responsavel",v),b.append("email_responsavel",g),b.append("cpf_responsavel",f),$.ajax({url:a.attr("action"),data:b,type:"POST",dataType:"json",success:function(e){Loading.hide(),!1===e.erro?Alerta.mensagem("Sucesso!","Seus dados foi efetuado com sucesso."):1==e.erro&&Alerta.mensagem(e.titulo,e.texto)},error:function(e){Loading.hide(),1==(e=JSON.parse(e.responseText)).erro?Alerta.mensagem(e.titulo,e.texto):Alerta.mensagem("Erro!","Ocorreu um erro ao enviar seu formul치rio, por favor, tente novamente.")},processData:!1,cache:!1,contentType:!1}),!1})});